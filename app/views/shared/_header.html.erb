<header class="relative z-50 border-b border-base bg-white text-main">
  <div class="mx-auto flex max-w-7xl items-center justify-between px-6 py-5">
    <div class="flex items-center gap-8">
      <%= link_to root_path, class: "flex items-center gap-2" do %>
        <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-brand text-white font-semibold">
          PL
        </div>
        <span class="text-lg font-semibold tracking-wide font-['Space_Grotesk']"><%= t("shared.header.brand") %></span>
      <% end %>

      <nav class="hidden items-center gap-8 text-sm font-medium text-stone-600 md:flex">
        <%= link_to t("shared.header.nav.about"), about_path, class: "transition hover:text-main" %>
        <%= link_to t("shared.header.nav.ranking"), ranking_path, class: "transition hover:text-main" %>
        <%= link_to t("shared.header.nav.products"), products_path, class: "transition hover:text-main" %>
        <% if user_signed_in? %>
          <%= link_to t("shared.header.nav.profile"), profile_path, class: "transition hover:text-main" %>
        <% end %>
      </nav>
    </div>

    <div class="flex items-center gap-3">
      <% if user_signed_in? %>
        <%= link_to profile_path, class: "flex items-center" do %>
          <% if current_user.avatar.attached? %>
            <%= image_tag current_user.avatar.variant(resize_to_fill: [36, 36]), class: "h-9 w-9 rounded-full border border-base object-cover", alt: t("shared.header.avatar_alt") %>
          <% else %>
            <div class="flex h-9 w-9 items-center justify-center rounded-full border border-base text-xs font-semibold text-stone-600">
              <%= current_user.username.to_s.first&.upcase || "U" %>
            </div>
          <% end %>
        <% end %>
        <%= link_to t("shared.header.logout"), destroy_user_session_path, data: { turbo_method: :delete }, class: "hidden rounded-lg border border-base px-4 py-2 text-sm font-semibold text-stone-600 transition hover:border-stone-300 md:inline-flex" %>
      <% else %>
        <%= link_to t("shared.header.login"), new_user_session_path, class: "btn-primary" %>
        <%= link_to t("shared.header.signup"), new_user_registration_path, class: "hidden btn-outline md:inline-flex" %>
      <% end %>

      <details class="relative md:hidden">
        <summary class="flex h-10 w-10 items-center justify-center rounded-lg border border-base text-stone-600 transition hover:border-stone-300">
          <span class="sr-only"><%= t("shared.header.open_menu") %></span>
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 7H20M4 12H20M4 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </summary>
        <div class="absolute right-0 mt-3 w-64 rounded-2xl border border-base bg-white p-4 shadow-md">
          <nav class="space-y-2 text-sm font-medium text-stone-600">
            <% unless user_signed_in? %>
              <%= link_to t("shared.header.signup"), new_user_registration_path, class: "block rounded-lg bg-brand px-4 py-2 text-white" %>
              <%= link_to t("shared.header.login"), new_user_session_path, class: "block rounded-lg border border-base px-4 py-2 text-stone-600" %>
            <% end %>
            <%= link_to t("shared.header.nav.about"), about_path, class: "block rounded-lg px-4 py-2 hover:bg-stone-50" %>
            <%= link_to t("shared.header.nav.ranking"), ranking_path, class: "block rounded-lg px-4 py-2 hover:bg-stone-50" %>
            <%= link_to t("shared.header.nav.products"), products_path, class: "block rounded-lg px-4 py-2 hover:bg-stone-50" %>
            <% if user_signed_in? %>
              <%= link_to t("shared.header.nav.profile"), profile_path, class: "block rounded-lg px-4 py-2 hover:bg-stone-50" %>
              <%= link_to t("shared.header.logout"), destroy_user_session_path, data: { turbo_method: :delete }, class: "block rounded-lg px-4 py-2 hover:bg-stone-50" %>
            <% end %>
          </nav>
        </div>
      </details>
    </div>
  </div>
</header>
